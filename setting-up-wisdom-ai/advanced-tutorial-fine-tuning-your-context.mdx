---
title: "Advanced Tutorial: Fine Tuning Your Context"
description: "This advanced tutorial will guide you through the process of fine-tuning your Wisdom AI data to improve chatbot performance for data analysis. You will learn how to make detailed adjustments to context and data sources, including matching columns and fields to ensure accurate and relevant responses."
---

This tutorial is intended for:

- Admin users, who are in charge of configuring data sources and setting up the chatbot.
- Data Administrators, responsibles for configuring particular Domains.

## Learning Objectives

By the end of this tutorial, you will be able to:

- Adjust and enrich the context used by Wisdom AI to better understand queries.
- Manage and fine-tune data source connections at a detailed level.
- Match and map columns and fields across multiple data sources for consistency.
- Test and validate your adjustments to ensure the chatbot responds correctly.

Once you have completed this tutorial, you will have fine-tuned your data so the Wisdom AI chatbot can deliver more accurate and context-aware responses, improving its ability to analyze and interact with your data effectively.

## Before you Begin

To follow this tutorial, you should:

- Have Admin/Data Admin access to your Wisdom AI account. Read the <u>How to Request an Environment</u> guide to know more about it.
- Have read the <u>Basic Tutorial: Connect and Experiment</u> tutorial to learn how to **Connect to your Data Sources** and how to **create Domains**.
- Have already created at least one Domain.

## Fine-tune your Data

1. Navigate to the **Domain** tab in the left sidebar and open it.
2. Select the Domain you would like to fine-tune. In the window that opens, you will find the following tabs:
   - **OVERVIEW**: Find here a summary of key information and activity related to the dataset.
   - **DATA SOURCES**: This tab is where data administrators manage and model the raw data structure to make it queryable and insightful within the platform.
   - **KNOWLEDGE**: Define here domain-specific logic and terminology in natural language. In this section, you can fine-tune how the system interprets data by setting contextual rules, custom metrics, and named entities, ensuring responses align with your business's definitions and expectations.
   - **ADVANCED**: Configure here domain-level settings that affect AI behavior, display preferences, chat customization, and fiscal logic, among others.
   - **EVALUATION**: Test and validate here how the system interprets natural language queries by creating evaluation sets. This ensures your domain returns accurate, expected results by letting you input prompts (with or without the corresponding SQL) and assess how the AI responds.

To start fine-tuning your data, you can:

- Add Context,
- Add Reviewed Queries,
- Add Metrics, and
- Add Entities to your data.

All these actions can be done from the Knowledge tab.

## Add Context

In the contect section, share domain-specific knowledge or information in natural language sentences. This helps the system understand your business context and formulate precise queries. For example, you can provide information like: 'Regions are same as Territories' or 'My sales stages are: Prospect, Negotiation, Closed'.

[Example images w responses before and after adding Context]

## Reviewed Queries

By reviewing queries, you can help users get a higher degree of confidence in the answers they receive. In this library of pre-validated queries, there are a tuple of a natural language query and its ideal SQL response. This is the most critical aspect of context for the language model to understand your data, since it is directly tied to SQL.

### Benefits of Reviewed Queries

- **Accuracy:** Pre-vetted queries ensure consistent and correct results.
- **Performance:** Optimized query execution paths for common questions.
- **Reusability:** Common business questions can be stored once and reused.
- **Canonicalization:** Standardize the way metrics are calculated and combined.

### Create Reviewed Queries

Reviewed queries are created as part of the chat experience. Each chat response comes with a thumbs up/thumbs down button to provide **feedback**. The thumbs up leads to queries being validated. These queries show up in the **Knowledge** \> **Reviewed Queries** tab once validated.

### Example: Validated Query Definition

\*\*Natural Language Query: \*\*"_What is the monthly revenue by region?"_

```
SELECT 
  DATE_TRUNC('month', o.order_date) AS month,
  r.region_name,
  SUM(o.total_amount) AS revenue
FROM orders o
JOIN customers c ON o.customer_id = c.id
JOIN regions r ON c.region_id = r.id
WHERE o.order_date >= CURRENT_DATE - INTERVAL '12 months'
GROUP BY 1, 2
ORDER BY 1, 2
```

[Image of a chat with a thumbs up and the query window that opens]

## Add Metrics

Metrics are numeric, quantitative values that can be measured to assess and track business performance. In some analytics contexts, metrics might also be called _measures_.

### Types of Metrics

- **Simple Metrics:** Direct aggregations of attributes (Sum of Revenue)
- **Calculated Metrics:** Formulas combining other metrics (Profit = Revenue - Cost)
- **Ratios:** Division of metrics (Conversion Rate = Orders / Visits)
- **Time-based Metrics:** Year-over-year growth, rolling averages

### Create a Metric

1. Navigate to the **Metrics** tab, located within the Knowledge section.
2. Click the **Add Metric** button.
3. Configure the metric:
   - Name and description
   - Base table (what the metric measures)
   - Formula or field reference
   - Format (currency, percentage, etc.)
   - Aggregation method

### Example: Sales Metrics

| Metric Name         | Description                                | SQL Expression                                              | Format                           |
| ------------------- | ------------------------------------------ | ----------------------------------------------------------- | -------------------------------- |
| Revenue             | Total revenue before discounts and returns | `SUM(total_amount)`                                         | Currency (USD, 2 decimal places) |
| Average Order Value | Average amount spent per order             | `AVG(total_amount)`                                         | Currency (USD, 2 decimal places) |
| Profit Margin       | Percentage of revenue that is profit       | `(SUM(total_amount) - SUM(cost)) / SUM(total_amount) * 100` | Percentage (1 decimal place)     |
| Items Per Order     | Average number of items in each order      | `SUM(item_count) / COUNT(DISTINCT order_id)`                | Number (1 decimal place)         |
| Days to Ship        | Average time between order and shipment    | `AVG(EXTRACT(DAY FROM ship_date - order_date))`             | Number (1 decimal place)         |

<Info>
  **SQL Implementation:** When creating metrics in WisdomAI, you will define the SQL expression that determines how the metric is calculated from the underlying data.
</Info>